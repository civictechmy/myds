{
  "name": "theme-switch",
  "type": "components:ui",
  "dependencies": [
    "@radix-ui/react-slot"
  ],
  "registryDependencies": [
    "button",
    "icons",
    "select",
    "use-theme"
  ],
  "files": [
    {
      "path": "components/ui/theme-switch.tsx",
      "content": "import {\n  FunctionComponent,\n  isValidElement,\n  ReactNode,\n  useEffect,\n  useState,\n} from \"react\";\nimport { MoonIcon, SunIcon } from \"@/components/ui/icons\";\nimport { Button } from \"./button\";\nimport { useTheme } from \"@/components/ui/hooks/use-theme\";\nimport {\n  Select,\n  SelectValue,\n  SelectItem,\n  SelectTrigger,\n  SelectContent,\n} from \"./select\";\nimport { Slot } from \"@radix-ui/react-slot\";\n\ninterface Theme {\n  label: string;\n  value: string;\n  icon: ReactNode;\n}\n\ninterface ThemeSwitch {\n  as?: \"toggle\" | \"select\";\n  themes?: Array<Theme>;\n  onChange?: (value: string) => void;\n}\n\nconst ThemeSwitch: FunctionComponent<ThemeSwitch> = ({\n  as = \"toggle\",\n  themes = [\n    { label: \"Light\", value: \"light\", icon: <SunIcon /> },\n    { label: \"Dark\", value: \"dark\", icon: <MoonIcon /> },\n  ],\n  onChange,\n}) => {\n  const { theme, setTheme, defaultTheme } = useTheme();\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const getTheme = (value: string) =>\n    themes.find((theme) => theme.value === value);\n\n  const displayIcon = (value?: string | null) => {\n    if (!value) return null;\n    const _theme = getTheme(value);\n    if (isValidElement(_theme?.icon))\n      return (\n        <Slot className={\"text-txt-black-900 size-4 flex-shrink-0\"}>\n          {_theme?.icon}\n        </Slot>\n      );\n    return _theme?.icon;\n  };\n\n  /*------------------ as toggle -----------------*/\n  const handleChange = (value?: string) => {\n    if (themes.length <= 1) return;\n\n    if (as === \"toggle\") {\n      const nextIndex = (currentIndex + 1) % themes.length;\n      setCurrentIndex(nextIndex);\n      setTheme(themes[nextIndex]!.value);\n      if (onChange) onChange(themes[nextIndex]!.value);\n    } else if (as === \"select\") {\n      if (!value) return;\n      setTheme(value);\n      if (onChange) onChange(value);\n    }\n  };\n\n  useEffect(() => {\n    if (as === \"toggle\") {\n      const index = themes.findIndex((t) => t.value === theme);\n      setCurrentIndex(index);\n    }\n  }, [theme]);\n\n  if (as === \"toggle\")\n    return (\n      <Button\n        variant=\"default-ghost\"\n        className=\"aspect-square flex-shrink-0 rounded-md\"\n        onClick={() => handleChange()}\n        size=\"small\"\n        aria-label={themes[currentIndex]?.label}\n        iconOnly\n      >\n        {displayIcon(themes[currentIndex]?.value) ||\n          themes[currentIndex]?.label}\n      </Button>\n    );\n\n  /*------------------ as select -----------------*/\n\n  return (\n    <Select\n      size=\"small\"\n      variant=\"outline\"\n      value={theme || defaultTheme}\n      onValueChange={handleChange}\n    >\n      <SelectTrigger>\n        <SelectValue>\n          {(value) => (\n            <div className=\"flex items-center gap-2\">\n              <div>{displayIcon(value as string)}</div>\n              <span>{getTheme(value as string)?.label}</span>\n            </div>\n          )}\n        </SelectValue>\n      </SelectTrigger>\n      <SelectContent align=\"end\">\n        {themes.map((theme) => (\n          <SelectItem\n            key={theme.value}\n            value={theme.value}\n            aria-label={theme.label}\n          >\n            {theme.label}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n};\n\nThemeSwitch.displayName = \"ThemeSwitch\";\n\nexport { ThemeSwitch };\n",
      "type": "components:ui"
    }
  ],
  "tailwind": {
    "config": {
      "theme": {
        "extend": {
          "colors": {}
        }
      }
    }
  }
}
{
  "name": "select",
  "type": "components:ui",
  "dependencies": [
    "@radix-ui/react-select",
    "class-variance-authority"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "components/ui/select.tsx",
      "content": "import * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { clx } from \"@/lib/utils\";\nimport { cva } from \"class-variance-authority\";\nimport { ChevronDownFillIcon } from \"@/components/ui/icons/chevron-down-fill\";\nimport { CheckCircleFillIcon } from \"@/components/ui/icons/check-circle-fill\";\nimport { Checkbox } from \"./checkbox\";\n\ntype SelectBase = Omit<\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Root>,\n  \"value\" | \"defaultValue\" | \"onValueChange\"\n> & {\n  variant: \"outline\" | \"ghost\" | null;\n  size: \"small\" | \"medium\" | \"large\" | null;\n};\n\ntype SelectSingle = SelectBase & {\n  multiple?: false;\n  value?: string;\n  defaultValue?: string;\n  onValueChange?: (value: string) => void;\n};\n\ntype SelectMultiple = SelectBase & {\n  multiple: true;\n  value?: string[];\n  defaultValue?: string[];\n  onValueChange?: (value: string[]) => void;\n};\n\nconst isMultiple = (props: SelectProps): props is SelectMultiple =>\n  Boolean(props.multiple);\n\ntype SelectProps = SelectSingle | SelectMultiple;\n\ntype SelectInternalProps = {\n  _handleClose: (open: boolean) => void;\n  _value: string | string[];\n};\n\nconst SelectContext = React.createContext<SelectProps & SelectInternalProps>({\n  _value: \"\",\n  _handleClose: () => {},\n  multiple: false,\n  value: \"\",\n  defaultValue: \"\",\n  onValueChange: () => {},\n  variant: \"outline\",\n  size: \"small\",\n});\n\nconst Select: React.ForwardRefExoticComponent<SelectProps> = React.forwardRef(\n  (props, ref) => {\n    const [_value, _setValue] = React.useState(\n      isMultiple(props)\n        ? props.value || props.defaultValue || []\n        : props.value || props.defaultValue || \"\",\n    );\n    const [_open, _setOpen] = React.useState<boolean | undefined>(\n      props.open || false,\n    );\n\n    React.useEffect(() => {\n      if (props.multiple && !Array.isArray(_value)) _setValue([]);\n      if (!props.multiple && Array.isArray(_value)) _setValue(\"\");\n    }, [props.multiple]);\n\n    React.useEffect(() => {\n      if (props.value) _setValue(props.value);\n    }, [props.value]);\n\n    React.useEffect(() => {\n      _setOpen(props.open);\n    }, [props.open]);\n\n    const handleValueChange = (value: string | undefined | null) => {\n      if (value === undefined || value === null) return;\n\n      if (isMultiple(props)) {\n        let temp = [];\n        if (!_value.includes(value)) temp = [..._value, value];\n        else temp = (_value as string[]).filter((v) => v !== value);\n\n        _setValue(temp);\n        props.onValueChange?.(temp);\n      } else {\n        _setValue(value);\n        props.onValueChange?.(value);\n      }\n    };\n\n    const handleClose = (open: boolean) => {\n      if (isMultiple(props) && !open) return;\n      _setOpen(open);\n      props.onOpenChange?.(open);\n    };\n\n    return (\n      <SelectContext.Provider\n        value={{ ...props, _value, _handleClose: _setOpen }}\n      >\n        <SelectPrimitive.Root\n          ref={ref}\n          {...props}\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          /* @ts-expect-error */\n          value={_value}\n          onValueChange={handleValueChange}\n          open={_open}\n          onOpenChange={handleClose}\n        />\n      </SelectContext.Provider>\n    );\n  },\n);\nSelect.displayName = \"Select\";\n\nconst SelectGroup = SelectPrimitive.Group;\n\n/*========================================================================================================================*/\n\nconst select_icon_cva = cva([\"text-txt-black-900\"], {\n  variants: {\n    size: {\n      small: \"size-4\",\n      medium: \"size-5\",\n      large: \"size-5\",\n    },\n  },\n});\n\ninterface SelectValueProps\n  extends Omit<\n    React.ComponentProps<typeof SelectPrimitive.Value>,\n    \"children\" | \"asChild\"\n  > {\n  label?: React.ReactNode;\n  icon?: React.JSXElementConstructor<any>;\n  children?: (value: string | string[]) => React.ReactNode | React.ReactNode;\n}\nconst SelectValue: React.ForwardRefExoticComponent<SelectValueProps> =\n  React.forwardRef(({ label, icon, children, className, ...props }, ref) => {\n    const rootProps = React.useContext(SelectContext);\n    const Icon = icon || ChevronDownFillIcon;\n\n    if (!isMultiple(rootProps))\n      return (\n        <>\n          {typeof label === \"string\" ? (\n            <SelectLabel>{label}</SelectLabel>\n          ) : (\n            label\n          )}\n          <SelectPrimitive.Value\n            ref={ref}\n            {...props}\n            className={clx(\"text-inherit\", className)}\n          >\n            {children && children(rootProps._value)}\n          </SelectPrimitive.Value>\n          <SelectPrimitive.Icon asChild>\n            <Icon className={select_icon_cva({ size: rootProps.size })} />\n          </SelectPrimitive.Icon>\n        </>\n      );\n\n    return (\n      <>\n        {typeof label === \"string\" ? <SelectLabel>{label}</SelectLabel> : label}\n        <SelectPrimitive.Value\n          ref={ref}\n          {...props}\n          className={clx(\"text-inherit\", className)}\n        >\n          {children && children(rootProps._value)}\n        </SelectPrimitive.Value>\n\n        {!children && <SelectCounter>{rootProps._value?.length}</SelectCounter>}\n\n        <SelectPrimitive.Icon asChild>\n          <Icon className={select_icon_cva({ size: rootProps.size })} />\n        </SelectPrimitive.Icon>\n      </>\n    );\n  });\nSelectValue.displayName = \"SelectValue\";\n\n/*========================================================================================================================*/\n\nconst select_counter_cva = cva(\n  [\n    \"flex aspect-square shrink-0 leading-none items-center justify-center bg-primary-600\",\n    \"rounded-full px-1 leading-none text-white\",\n    \"group-disabled:bg-bg-white-disabled group-disabled:text-inherit\",\n  ],\n  {\n    variants: {\n      size: {\n        small: \"text-body-sm\",\n        medium: \"text-body-md\",\n        large: \"text-body-md\",\n      },\n    },\n    defaultVariants: {\n      size: \"small\",\n    },\n  },\n);\n\ninterface SelectCounterProps extends React.ComponentProps<\"span\"> {}\n\nconst SelectCounter: React.ForwardRefExoticComponent<SelectCounterProps> =\n  React.forwardRef(({ children, className, ...props }, ref) => {\n    const { size } = React.useContext(SelectContext);\n\n    return (\n      <span\n        ref={ref}\n        className={clx(select_counter_cva({ size }), className)}\n        {...props}\n      >\n        {children}\n      </span>\n    );\n  });\n\nSelectCounter.displayName = \"SelectCounter\";\n/*========================================================================================================================*/\n\nconst select_trigger_cva = cva(\n  [\n    \"group inline-flex select-none items-center gap-1.5 outline-none rounded-md w-fit text-txt-black-900\",\n    \"focus:ring focus:ring-fr-primary\",\n    \"disabled:bg-bg-white-disabled disabled:text-txt-black-disabled disabled:border-transparent disabled:cursor-not-allowed\",\n  ],\n  {\n    variants: {\n      variant: {\n        outline: [\n          \"bg-bg-white border border-otl-gray-200 shadow-button\",\n          \"hover:bg-bg-white-hover hover:border-otl-gray-300\",\n        ],\n        ghost: [\n          \"bg-transparent border border-transparent\",\n          \"hover:bg-bg-white-hover\",\n        ],\n      },\n      size: {\n        small: \"py-1.5 px-2.5 text-body-sm\",\n        medium: \"py-2 px-3 text-body-md\",\n        large: \"py-2.5 px-4 text-body-lg\",\n      },\n    },\n    defaultVariants: { variant: \"outline\", size: \"small\" },\n  },\n);\n\nconst SelectTrigger: React.ForwardRefExoticComponent<\n  React.ComponentProps<typeof SelectPrimitive.Trigger>\n> = React.forwardRef(({ className, children, ...props }, ref) => {\n  const { variant, size } = React.useContext(SelectContext);\n\n  return (\n    <SelectPrimitive.Trigger\n      ref={ref}\n      className={select_trigger_cva({\n        variant,\n        size,\n        className,\n      })}\n      {...props}\n    >\n      {children}\n    </SelectPrimitive.Trigger>\n  );\n});\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\n/*========================================================================================================================*/\n\nconst select_label_cva = cva(\n  [\"group-data-[disabled]:text-txt-black-disabled\"],\n  {\n    variants: {\n      size: {\n        small: \"text-body-sm\",\n        medium: \"text-body-md\",\n        large: \"text-body-lg\",\n      },\n      multiple: {\n        false: \"text-txt-black-500\",\n        true: \"text-txt-black-900\",\n      },\n    },\n    defaultVariants: { size: \"small\", multiple: false },\n  },\n);\n\nconst SelectLabel: React.ForwardRefExoticComponent<\n  React.ComponentProps<\"span\">\n> = React.forwardRef(({ className, ...props }, ref) => {\n  const { size, multiple } = React.useContext(SelectContext);\n  return (\n    <span\n      ref={ref}\n      className={select_label_cva({ size, multiple, className })}\n      {...props}\n    />\n  );\n});\nSelectLabel.displayName = \"SelectLabel\";\n\n/*========================================================================================================================*/\n\nconst select_content_cva = cva(\n  [\n    \"bg-bg-dialog relative z-50 py-1 max-h-64 min-w-[8rem] overflow-hidden \",\n    \"rounded-md border border-otl-gray-200 shadow-context-menu\",\n    \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n  ],\n  {\n    variants: {\n      position: {\n        popper:\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        \"item-aligned\": \"\",\n      },\n      size: {\n        small: \"max-h-64\",\n        medium: \"max-h-72\",\n        large: \"max-h-80\",\n      },\n    },\n    defaultVariants: { position: \"popper\", size: \"small\" },\n  },\n);\n\nconst SelectContent: React.ForwardRefExoticComponent<\n  React.ComponentProps<typeof SelectPrimitive.Content>\n> = React.forwardRef(\n  ({ className, children, position = \"popper\", ...props }, ref) => {\n    const { _handleClose, size } = React.useContext(SelectContext);\n    return (\n      <SelectPrimitive.Portal>\n        <SelectPrimitive.Content\n          ref={ref}\n          className={select_content_cva({ position, size, className })}\n          position={position}\n          {...props}\n          onPointerDownOutside={() => _handleClose?.(false)}\n        >\n          <SelectPrimitive.Viewport\n            className={clx(\n              position === \"popper\" &&\n                \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\n            )}\n          >\n            {children}\n          </SelectPrimitive.Viewport>\n        </SelectPrimitive.Content>\n      </SelectPrimitive.Portal>\n    );\n  },\n);\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\n/*========================================================================================================================*/\n\nconst SelectGroupTitle = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectXPad>\n    <SelectPrimitive.Label\n      ref={ref}\n      className={clx(\n        \"text-body-xs px-2.5 py-1.5 font-semibold text-gray-400\",\n        className,\n      )}\n      {...props}\n    />\n  </SelectXPad>\n));\nSelectGroupTitle.displayName = SelectPrimitive.Label.displayName;\n\n/*========================================================================================================================*/\n\nconst select_item_cva = cva(\n  [\n    \"flex items-center w-full cursor-default select-none py-1.5 gap-2 font-medium outline-none text-txt-black-700 rounded-xs\",\n    \"data-[highlighted]:bg-bg-washed\",\n  ],\n  {\n    variants: {\n      size: {\n        small: \"text-body-xs\",\n        medium: \"text-body-sm\",\n        large: \"text-body-md\",\n      },\n      multiple: {\n        false: \"pl-2.5 pr-[38px]\",\n        true: \"px-2.5\",\n      },\n      disabled: {\n        false: \"\",\n        true: \"bg-bg-white-disabled text-txt-black-disabled border-transparent cursor-not-allowed hover:bg-none\",\n      },\n    },\n    defaultVariants: { size: \"small\", multiple: false, disabled: false },\n  },\n);\n\nconst SelectItem: React.ForwardRefExoticComponent<\n  React.ComponentProps<typeof SelectPrimitive.Item>\n> = React.forwardRef(({ className, children, disabled, ...props }, ref) => {\n  const rootProps = React.useContext(SelectContext);\n  if (!isMultiple(rootProps))\n    return (\n      <SelectXPad>\n        <SelectPrimitive.Item\n          ref={ref}\n          className={clx(\n            select_item_cva({\n              size: rootProps.size,\n              multiple: false,\n              disabled,\n            }),\n            className,\n          )}\n          {...props}\n        >\n          <span className=\"absolute right-4 flex h-3.5 w-3.5 items-center justify-center\">\n            <SelectPrimitive.ItemIndicator>\n              <CheckCircleFillIcon\n                data-size={rootProps.size}\n                className=\"text-primary-600 size-5 data-[size=small]:size-4\"\n              />\n            </SelectPrimitive.ItemIndicator>\n          </span>\n          {children}\n          <SelectPrimitive.ItemText asChild>\n            {children}\n          </SelectPrimitive.ItemText>\n        </SelectPrimitive.Item>\n      </SelectXPad>\n    );\n\n  const checked = rootProps._value.includes(props.value);\n\n  return (\n    <SelectXPad>\n      <SelectPrimitive.Item\n        ref={ref}\n        className={clx(\n          select_item_cva({\n            size: rootProps.size,\n            multiple: true,\n            disabled,\n            className,\n          }),\n          className,\n        )}\n        {...props}\n        data-state={checked ? \"checked\" : \"unchecked\"}\n      >\n        <Checkbox checked={checked} />\n        <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n      </SelectPrimitive.Item>\n    </SelectXPad>\n  );\n});\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\n/*========================================================================================================================*/\n\nconst SelectSeparator: React.ForwardRefExoticComponent<\n  React.ComponentProps<typeof SelectPrimitive.Separator>\n> = React.forwardRef(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={clx(\"bg-otl-divider -mx-1 my-1 h-px\", className)}\n    {...props}\n  />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\n/*========================================================================================================================*/\n\nconst SelectHeader: React.ForwardRefExoticComponent<\n  React.ComponentProps<\"div\">\n> = React.forwardRef(({ className, ...props }, ref) => {\n  return (\n    <SelectXPad\n      ref={ref}\n      className={clx(\"bg-bg-dialog sticky top-0 z-50 pb-1\", className)}\n      {...props}\n    />\n  );\n});\nSelectHeader.displayName = \"SelectHeader\";\n\n/*========================================================================================================================*/\n\nconst SelectFooter: React.ForwardRefExoticComponent<\n  React.ComponentProps<\"div\">\n> = React.forwardRef(({ className, ...props }, ref) => {\n  return (\n    <SelectXPad\n      ref={ref}\n      className={clx(\n        \"bg-bg-dialog border-otl-gray-200 sticky bottom-0 z-50 border-t py-1\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSelectFooter.displayName = \"SelectFooter\";\n\n/*========================================================================================================================*/\n\nconst SelectXPad: React.FunctionComponent<React.ComponentProps<\"div\">> = ({\n  children,\n  className,\n}) => <div className={clx(\"px-1\", className)}>{children}</div>;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectGroupTitle,\n  SelectValue,\n  SelectTrigger,\n  SelectLabel,\n  SelectContent,\n  SelectHeader,\n  SelectFooter,\n  SelectItem,\n  SelectSeparator,\n  // SelectScrollUpButton,\n  // SelectScrollDownButton,\n};\n",
      "type": "components:ui"
    }
  ],
  "tailwind": {
    "config": {
      "theme": {
        "extend": {
          "colors": {}
        }
      }
    }
  }
}
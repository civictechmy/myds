{
  "name": "cookie-banner",
  "type": "components:ui",
  "dependencies": [
    "@radix-ui/react-dialog",
    "@radix-ui/react-slot",
    "class-variance-authority"
  ],
  "registryDependencies": [
    "button",
    "utils"
  ],
  "files": [
    {
      "path": "components/ui/cookie-banner.tsx",
      "content": "import React, {\n  ComponentProps,\n  createContext,\n  forwardRef,\n  ForwardRefExoticComponent,\n  FunctionComponent,\n  useContext,\n  useState,\n} from \"react\";\nimport { Button } from \"./button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogClose,\n  DialogDescription,\n  DialogTitle,\n  DialogPortal,\n} from \"@radix-ui/react-dialog\";\nimport { clx } from \"@/lib/utils\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva } from \"class-variance-authority\";\nimport { CrossIcon } from \"@/components/ui/icons/cross\";\n\ninterface CookieBannerContextValue {\n  showPreferences: boolean;\n  setShowPreferences: (show: boolean) => void;\n}\n\nconst CookieBannerContext = createContext<CookieBannerContextValue>({\n  showPreferences: false,\n  setShowPreferences: () => {},\n});\n\ntype CookieBannerProps = ComponentProps<typeof Dialog> & {\n  className?: string;\n};\n\nconst cookie_content_cva = cva([\n  \"bg-bg-white p-4.5 shadow-card border-otl-gray-200 fixed bottom-0 right-0 z-30 max-w-[500px]\",\n  \"space-y-1 rounded-lg border transition-all outline-none\",\n  \"data-[state=open]:animate-in data-[state=open]:slide-in-from-bottom-full data-[state=open]:fade-in data-[state=open]:duration-400\",\n  \"data-[state=closed]:animate-out data-[state=closed]:slide-out-to-bottom-full data-[state=closed]:fade-out data-[state=closed]:duration-200\",\n  \"sm:mb-4 sm:mr-4 sm:p-6\",\n]);\n\nconst CookieBanner: FunctionComponent<CookieBannerProps> = ({\n  className,\n  children,\n  ...props\n}) => {\n  const [showPreferences, setShowPreferences] = useState(false);\n  const resetPreferences = () => setShowPreferences(false);\n\n  return (\n    <CookieBannerContext.Provider\n      value={{ showPreferences, setShowPreferences }}\n    >\n      <Dialog {...props}>\n        <DialogPortal>\n          <DialogContent\n            className={clx(cookie_content_cva(), className)}\n            onInteractOutside={resetPreferences}\n            {...props}\n          >\n            <DialogClose className=\"ring-fr-primary absolute right-0 top-0 mr-4 mt-4 rounded-md p-1.5 outline-none transition-all focus:ring\">\n              <CrossIcon className=\"size-4 shrink-0\" />\n            </DialogClose>\n            {children}\n          </DialogContent>\n        </DialogPortal>\n      </Dialog>\n    </CookieBannerContext.Provider>\n  );\n};\n\nconst cookie_action_cva = cva(\n  [\"w-full flex-col justify-start gap-[0.5rem] p-0 pt-3 sm:flex-row\"],\n  {\n    variants: {\n      showPreferences: {\n        true: \"flex\",\n        false: \"hidden\",\n      },\n    },\n    defaultVariants: {\n      showPreferences: false,\n    },\n  },\n);\n\nconst CookieBannerTitle: ForwardRefExoticComponent<\n  ComponentProps<typeof DialogTitle>\n> = forwardRef(({ className, ...props }, ref) => {\n  return (\n    <DialogTitle\n      ref={ref}\n      className={clx(\n        \"text-body-md font-body text-txt-black-900 font-semibold\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nconst CookieBannerDescription: ForwardRefExoticComponent<\n  ComponentProps<typeof DialogDescription>\n> = forwardRef(({ className, ...props }, ref) => {\n  return (\n    <DialogDescription\n      ref={ref}\n      className={clx(\n        \"text-body-sm font-body text-txt-black-900 font-normal\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\n\nconst CookieBannerAction: ForwardRefExoticComponent<\n  ComponentProps<\"div\"> & { preferences?: boolean }\n> = forwardRef(({ className, preferences = false, ...props }, ref) => {\n  const context = useContext(CookieBannerContext);\n\n  if (!context)\n    throw new Error(\"CookieBannerAction must be used within CookieBanner\");\n\n  return (\n    <div\n      ref={ref}\n      className={clx(\n        cookie_action_cva({\n          showPreferences: context.showPreferences === preferences,\n        }),\n        className,\n      )}\n      {...props}\n    />\n  );\n});\n\nconst CookieBannerPreferences: ForwardRefExoticComponent<\n  ComponentProps<typeof DialogDescription>\n> = forwardRef(({ children, className, ...props }, ref) => {\n  const context = useContext(CookieBannerContext);\n\n  if (!context)\n    throw new Error(\"CookieBannerPreferences must be used within CookieBanner\");\n  if (!context.showPreferences) return null;\n\n  return (\n    <DialogDescription\n      ref={ref}\n      className={clx(\"flex flex-col gap-2 px-0 py-3\", className)}\n      {...props}\n    >\n      {children}\n    </DialogDescription>\n  );\n});\n\nconst CookieBannerPreferencesTrigger: ForwardRefExoticComponent<\n  ComponentProps<typeof Button>\n> = forwardRef(({ children, className, asChild = false, ...props }, ref) => {\n  const context = useContext(CookieBannerContext);\n  if (!context)\n    throw new Error(\n      \"CookieBannerPreferencesTrigger must be used within CookieBanner\",\n    );\n\n  const togglePreferences = () => {\n    context.setShowPreferences(!context.showPreferences);\n  };\n\n  const Comp = asChild ? Slot : Button;\n  return (\n    <Comp\n      variant=\"primary-outline\"\n      size=\"medium\"\n      className={clx(\"w-full justify-center sm:w-auto\", className)}\n      onClick={togglePreferences}\n      {...props}\n      ref={ref}\n    >\n      {children}\n    </Comp>\n  );\n});\n\nconst CookieBannerClose = DialogClose;\nCookieBanner.displayName = \"CookieBanner\";\nCookieBannerAction.displayName = \"CookieBannerAction\";\nCookieBannerDescription.displayName = \"CookieBannerDescription\";\nCookieBannerClose.displayName = \"CookieBannerClose\";\nCookieBannerPreferences.displayName = \"CookieBannerPreferences\";\nCookieBannerTitle.displayName = \"CookieBannerTitle\";\nCookieBannerPreferencesTrigger.displayName = \"CookieBannerPreferencesTrigger\";\n\nexport {\n  CookieBanner,\n  CookieBannerTitle,\n  CookieBannerDescription,\n  CookieBannerClose,\n  CookieBannerPreferences,\n  CookieBannerAction,\n  CookieBannerPreferencesTrigger,\n};\n",
      "type": "components:ui"
    }
  ],
  "tailwind": {
    "config": {
      "theme": {
        "extend": {
          "colors": {}
        }
      }
    }
  }
}
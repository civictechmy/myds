{
  "name": "navbar",
  "type": "components:layout",
  "dependencies": [
    "@radix-ui/react-navigation-menu",
    "@radix-ui/react-popover",
    "@radix-ui/react-slot",
    "class-variance-authority",
    "react-remove-scroll"
  ],
  "registryDependencies": [
    "button",
    "link",
    "utils"
  ],
  "files": [
    {
      "path": "components/ui/navbar.tsx",
      "content": "import {\n  FunctionComponent,\n  useState,\n  createContext,\n  useContext,\n  ReactNode,\n  ComponentProps,\n  useRef,\n  useId,\n  useEffect,\n  RefObject,\n} from \"react\";\nimport { clx } from \"@/lib/utils\";\nimport {\n  NavigationMenu,\n  NavigationMenuContent,\n  NavigationMenuItem,\n  NavigationMenuList,\n  NavigationMenuTrigger,\n} from \"@radix-ui/react-navigation-menu\";\nimport {\n  Popover,\n  PopoverAnchor,\n  PopoverContent,\n  PopoverPortal,\n} from \"@radix-ui/react-popover\";\nimport { Button } from \"./button\";\nimport { Link } from \"./link\";\nimport { ChevronDownIcon, CrossIcon, HamburgerMenuIcon } from \"@/components/ui/icons\";\nimport { cva } from \"class-variance-authority\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport { Root, Slot } from \"@radix-ui/react-slot\";\n\ninterface NavbarProps extends ComponentProps<\"header\"> {}\n\ninterface NavbarContextProps {\n  id: string;\n  show: boolean;\n  setShow: (value: boolean) => void;\n}\nconst NavbarContext = createContext<NavbarContextProps>({\n  id: \"\",\n  show: false,\n  setShow: () => {},\n});\n\nconst Navbar: FunctionComponent<NavbarProps> = ({\n  children,\n  className,\n  ...props\n}) => {\n  const id = useId();\n\n  const [show, setShow] = useState(false);\n  return (\n    <NavbarContext.Provider value={{ id, show, setShow }}>\n      <header\n        id={id}\n        className={clx(\n          \"bg-bg-white border-otl-gray-200 shadow-button sticky top-0 z-50 h-16 w-full border-b max-md:h-14 print:hidden\",\n          className,\n        )}\n        data-nosnippet\n        {...props}\n      >\n        <div className=\"px-4.5 relative mx-auto flex h-16 max-w-screen-xl items-center justify-between gap-4 max-md:h-14 md:px-6\">\n          {children}\n        </div>\n      </header>\n    </NavbarContext.Provider>\n  );\n};\n\nNavbar.displayName = \"Navbar\";\n\ninterface NavbarLogoProps extends ComponentProps<typeof Link> {\n  src: string;\n  alt: string;\n  maxChars?: number;\n}\n\nconst logo_cva = cva(\n  [\"font-semibold max-w-[200px] font-heading text-txt-black-900\"],\n  {\n    variants: {\n      too_long: {\n        false: \"text-body-lg\",\n        true: \"text-body-xs leading-[14px] line-clamp-2\",\n      },\n    },\n    defaultVariants: {\n      too_long: false,\n    },\n  },\n);\nconst NavbarLogo: FunctionComponent<NavbarLogoProps> = ({\n  src,\n  alt,\n  href = \"/\",\n  children,\n  maxChars = 19,\n  className,\n  ...props\n}) => {\n  return (\n    <Link\n      href={href}\n      underline=\"none\"\n      className={clx(\"flex h-full w-auto items-center gap-2.5\", className)}\n      {...props}\n    >\n      <img\n        src={src}\n        width={40}\n        height={32}\n        className=\"aspect-auto h-full max-h-8 w-auto select-none\"\n        alt={alt}\n      />\n      {typeof children === \"string\" ? (\n        <span className={logo_cva({ too_long: children.length > maxChars })}>\n          {children}\n        </span>\n      ) : (\n        children\n      )}\n    </Link>\n  );\n};\n\nNavbarLogo.displayName = \"NavbarLogo\";\ninterface NavigationMenuProps {\n  children: ReactNode;\n  classNameNavDesktop?: string;\n  classNameNavMobile?: string;\n}\n\nconst NavbarMenu: FunctionComponent<NavigationMenuProps> = ({\n  children,\n  classNameNavDesktop,\n  classNameNavMobile,\n}) => {\n  return (\n    <NavigationMenu className=\"grow\">\n      {/* Desktop */}\n      <NavigationMenuList\n        className={clx(\n          \"hidden xl:flex xl:justify-start xl:gap-1\",\n          classNameNavDesktop,\n        )}\n      >\n        {children}\n      </NavigationMenuList>\n\n      {/* Tablet / Mobile */}\n      <NavbarMobileMenu className={clx(classNameNavMobile)}>\n        {children}\n      </NavbarMobileMenu>\n    </NavigationMenu>\n  );\n};\n\ninterface NavbarMobileMenuProps {\n  children: ReactNode;\n  className?: string;\n}\n\ntype Measurable = {\n  getBoundingClientRect: () => DOMRect;\n};\n\nconst NavbarMobileMenu: FunctionComponent<NavbarMobileMenuProps> = ({\n  children,\n  className,\n}) => {\n  const { id, show, setShow } = useContext(NavbarContext);\n\n  const virtualRef = useRef<Measurable | null>(null);\n\n  useEffect(() => {\n    const node = document.getElementById(id);\n\n    if (node) {\n      virtualRef.current = node;\n    }\n  }, [id]);\n\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <RemoveScroll as={Root} allowPinchZoom enabled>\n      <Popover open={show} onOpenChange={setShow}>\n        <PopoverAnchor virtualRef={virtualRef as RefObject<Measurable>} />\n        <PopoverPortal>\n          <PopoverContent\n            sideOffset={0}\n            align=\"start\"\n            className={clx(\"absolute top-full z-40 h-dvh xl:hidden\", className)}\n          >\n            <div\n              className={clx(\n                \"absolute h-dvh w-[var(--radix-popper-anchor-width)]\",\n                \"bg-gray-700/60\",\n                \"data-[state=open]:animate-in data-[state=open]:fade-in-0\",\n                \"data-[state=closed]:animate-out data-[state=closed]:fade-out-0\",\n              )}\n              aria-hidden\n              onClick={() => setShow(false)}\n            />\n            <ul\n              className={clx(\n                \"absolute max-h-[80dvh] w-[var(--radix-popper-anchor-width)] overflow-y-auto p-3\",\n                \"border-otl-gray-200 rounded-md rounded-t-none border border-t-0 outline-none\",\n                \"bg-bg-dialog text-txt-black-900 shadow-context-menu\",\n                \"data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:slide-in-from-top-2\",\n                \"data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2\",\n              )}\n            >\n              {children}\n            </ul>\n          </PopoverContent>\n        </PopoverPortal>\n      </Popover>\n    </RemoveScroll>\n  );\n};\n\nNavbarMenu.displayName = \"NavbarMenu\";\n\ninterface NavbarMenuItemProps\n  extends ComponentProps<typeof NavigationMenuItem> {\n  children: ReactNode;\n  href: string;\n  className?: string;\n  asChild?: boolean;\n}\n\nconst navbar_menu_item_cva = cva(\n  [\n    \"bg-transparent hover:bg-bg-washed text-txt-black-700 truncate px-2.5 py-1.5\",\n    \"transition-colors motion-reduce:transition-none list-none\",\n    \"w-full xl:w-fit text-body-sm flex items-center cursor-pointer\",\n  ],\n  {\n    variants: {\n      is_from_dropdown: {\n        true: \"text-sm font-normal ml-3 mt-1 xl:ml-0 xl:w-full xl:mt-0 rounded-xs text-left\",\n        false: \"font-medium rounded-md\",\n      },\n    },\n  },\n);\n\nconst NavbarMenuItem: FunctionComponent<NavbarMenuItemProps> = ({\n  className,\n  children,\n  href,\n  asChild,\n  ...props\n}) => {\n  const is_from_dropdown = useContext(NavbarMenuDropdownContext);\n  const Comp = asChild ? Slot : Link;\n  return (\n    <NavigationMenuItem\n      className={clx(navbar_menu_item_cva({ is_from_dropdown }), className)}\n      {...props}\n    >\n      <Comp href={href} underline=\"none\" className=\"w-full\">\n        {children}\n      </Comp>\n    </NavigationMenuItem>\n  );\n};\n\nNavbarMenuItem.displayName = \"NavbarMenuItem\";\n\ninterface NavbarMenuDropdownProps {\n  children: ReactNode;\n  title: ReactNode;\n  className?: string;\n}\n\nconst NavbarMenuDropdownContext = createContext(false);\n\nconst NavbarMenuDropdown: FunctionComponent<NavbarMenuDropdownProps> = ({\n  children,\n  title,\n  className,\n}) => {\n  return (\n    <NavbarMenuDropdownContext.Provider value={true}>\n      <NavigationMenuItem key=\"desktop-dropdown\" className=\"relative list-none\">\n        <NavigationMenuTrigger\n          className={clx(\n            navbar_menu_item_cva({ is_from_dropdown: false }),\n            \"data-[state=open]:bg-bg-washed group w-full select-none bg-transparent transition-colors xl:w-max\",\n          )}\n        >\n          {title}\n          <ChevronDownIcon\n            className=\"relative top-px ml-1.5 size-4 transition group-data-[state=open]:rotate-180 motion-reduce:transition-none\"\n            aria-hidden=\"true\"\n          />\n        </NavigationMenuTrigger>\n        <NavigationMenuContent\n          className={clx(\n            \"xl:absolute xl:left-0 xl:top-full xl:mt-2 xl:min-w-[220px]\",\n            \"xl:bg-bg-white xl:shadow-context-menu xl:list-none xl:rounded-md xl:p-1.5\",\n            \"w-full xl:w-fit\",\n            className,\n          )}\n        >\n          <ul>{children}</ul>\n        </NavigationMenuContent>\n      </NavigationMenuItem>\n    </NavbarMenuDropdownContext.Provider>\n  );\n};\n\nNavbarMenuDropdown.displayName = \"NavbarMenuDropdown\";\n\ninterface NavbarActionProps extends ComponentProps<typeof Button> {\n  children?: ReactNode;\n  className?: string;\n  onClick?: () => void;\n}\n\nconst NavbarAction: FunctionComponent<NavbarActionProps> = ({\n  children,\n  className,\n  onClick,\n  ...props\n}) => {\n  const { show, setShow } = useContext(NavbarContext);\n  const handleToggle = () => {\n    setShow(!show);\n    if (onClick) onClick();\n  };\n  return (\n    <div className=\"flex items-center justify-end gap-2\">\n      {children}\n      <Button\n        variant=\"default-ghost\"\n        iconOnly\n        className={clx(\"xl:hidden\", className)}\n        onClick={handleToggle}\n        aria-label={`${show ? \"Close\" : \"Open\"} navigation menu`}\n        {...props}\n      >\n        {show ? <CrossIcon /> : <HamburgerMenuIcon />}\n      </Button>\n    </div>\n  );\n};\n\nNavbarAction.displayName = \"NavbarAction\";\n\nexport {\n  Navbar,\n  NavbarLogo,\n  NavbarAction,\n  NavbarMenu,\n  NavbarMenuItem,\n  NavbarMenuDropdown,\n};\n",
      "type": "components:layout"
    }
  ],
  "tailwind": {
    "config": {
      "theme": {
        "extend": {
          "colors": {}
        }
      }
    }
  }
}